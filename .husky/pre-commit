#!/usr/bin/env sh

echo "🧪 コミット前のテストを実行しています..."

# lint-stagedを実行
npx lint-staged

# テストを実行
echo "📋 コンテンツテストを実行..."
npm run test:content
if [ $? -ne 0 ]; then
  echo "❌ コンテンツテストが失敗しました"
  exit 1
fi

echo "📐 レイアウトテストを実行..."
npm run test:layout
if [ $? -ne 0 ]; then
  echo "❌ レイアウトテストが失敗しました"
  exit 1
fi

echo "🧪 ユニットテストを実行..."
npm test -- --reporter=verbose
if [ $? -ne 0 ]; then
  echo "❌ ユニットテストが失敗しました"
  exit 1
fi

echo "✅ すべてのテストが合格しました！"
